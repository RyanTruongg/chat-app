(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{100:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(56),i=n.n(r),o=n(22),u=n(3),s=n(14),l=n(37),d=n(2),j=a.a.lazy((function(){return n.e(4).then(n.bind(null,111))})),h=a.a.lazy((function(){return n.e(3).then(n.bind(null,110))})),b=a.a.lazy((function(){return n.e(11).then(n.bind(null,112))}));var f=function(){return Object(d.jsx)("div",{className:"app",children:Object(d.jsx)(s.b,{children:Object(d.jsxs)(o.a,{children:[Object(d.jsx)(u.b,{exact:!0,path:"/login",children:Object(d.jsx)(c.Suspense,{fallback:Object(d.jsx)("div",{children:"Loading..."}),children:Object(d.jsx)(b,{})})}),Object(d.jsx)(s.a,{exact:!0,path:"/",children:Object(d.jsx)(u.a,{to:"home"})}),Object(d.jsx)(s.a,{path:"/home",children:Object(d.jsx)(l.a,{children:Object(d.jsxs)(o.a,{children:[Object(d.jsx)(c.Suspense,{fallback:Object(d.jsx)("div",{children:"Loading..."}),children:Object(d.jsx)(j,{})}),Object(d.jsx)(u.d,{children:Object(d.jsx)(s.a,{exact:!0,path:"/home/t/:roomID",children:Object(d.jsx)(c.Suspense,{fallback:Object(d.jsx)("div",{children:"Loading..."}),children:Object(d.jsx)(h,{})})})})]})})})]})})})},O=function(e){e&&e instanceof Function&&n.e(12).then(n.bind(null,105)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))};n.e(10).then(n.t.bind(null,103,7)),n.e(9).then(n.t.bind(null,104,7)),i.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(f,{})}),document.getElementById("root")),O()},14:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return O})),n.d(t,"a",(function(){return p}));var c=n(17),a=n(38),r=n(18),i=n(0),o=n.n(i),u=n(3),s=n(26),l=n(33);n(93);l.a.initializeApp({apiKey:"AIzaSyBtLFctIyZhPquAqnrLP8DxOCJnDv16xvI",authDomain:"chat-app-73a8d.firebaseapp.com",projectId:"chat-app-73a8d",storageBucket:"chat-app-73a8d.appspot.com",messagingSenderId:"1026946776432",appId:"1:1026946776432:web:0e06c59bd41ce6ea01e3b5",measurementId:"G-QKZ0YM2KWT"});var d=l.a,j=n(2),h=["children"],b=o.a.createContext();function f(e){var t=e.children,n=function(){var e=Object(i.useState)(null),t=Object(r.a)(e,2),n=t[0],c=t[1],a=Object(i.useState)("listening"),o=Object(r.a)(a,2),u=o[0],l=o[1];return Object(i.useEffect)((function(){return d.auth().onAuthStateChanged((function(e){e?(c(e),l("loged")):(c(null),l("notloged"),s.a.disconnect())}))}),[]),Object(i.useEffect)((function(){"loged"===u&&n&&(s.a.auth={user:n},s.a.connect())}),[n,u]),{loginState:u,user:n,signin:function(){var e=new d.auth.GoogleAuthProvider;d.auth().signInWithRedirect(e).then((function(){console.log("Login Success")})).catch((function(){console.log("Login Failed")}))},signout:function(){d.auth().signOut().then((function(){return c(null)}))}}}();return Object(j.jsx)(b.Provider,{value:n,children:t})}function O(){return Object(i.useContext)(b)}function p(e){var t=e.children,n=Object(a.a)(e,h),r=O();return Object(j.jsx)(u.b,Object(c.a)(Object(c.a)({},n),{},{render:function(e){var n=e.location;switch(r.loginState){case"listening":return Object(j.jsx)("p",{children:"Loading..."});case"loged":return t;case"notloged":return Object(j.jsx)(u.a,{to:{pathname:"/login",state:{from:n}}});default:return Object(j.jsx)("p",{children:"Error"})}}}))}},26:function(e,t,n){"use strict";var c=n(57),a=Object(c.io)("https://msg-chatapp.herokuapp.com/",{autoConnect:!1});a.on("connect_error",(function(){console.log("connect_error")})),t.a=a},37:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d}));var c=n(17),a=n(18),r=n(0),i=n.n(r),o=n(14),u=n(2),s=i.a.createContext(),l=function(e){var t=e.children,n=j();return Object(u.jsx)(s.Provider,{value:n,children:t})},d=function(){return Object(r.useContext)(s)},j=function(){var e,t=Object(r.useState)([]),n=Object(a.a)(t,2),i=n[0],u=n[1],s=Object(o.c)();return Object(r.useEffect)((function(){if(s.user){var e,t=fetch("/api/pm-list/"+(null===(e=s.user)||void 0===e?void 0:e.uid)).then((function(e){return e.json()}));t.then((function(e){return u(e.users)})),t.catch((function(e){return console.log(e)}))}}),[s.user,null===(e=s.user)||void 0===e?void 0:e.uid]),{data:i,setContactList:u,updateContactLastMsg:function(e,t){var n=null===i||void 0===i?void 0:i.map((function(n){return n.uid===e?Object(c.a)(Object(c.a)({},n),{},{msg:t}):n}));u(n)}}}}},[[100,1,2]]]);