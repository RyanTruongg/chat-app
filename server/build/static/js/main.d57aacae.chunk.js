(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[2],{12:function(t,n,e){"use strict";e.d(n,"b",(function(){return h})),e.d(n,"c",(function(){return b})),e.d(n,"a",(function(){return f}));var c=e(15),r=e(33),i=e(16),u=e(0),o=e.n(u),a=e(2),s=e(25),l=e(1),d=["children"],j=o.a.createContext();function h(t){var n=t.children,c=function(){var t=Object(u.useState)(null),n=Object(i.a)(t,2),c=n[0],r=n[1],o=Object(u.useState)("listening"),a=Object(i.a)(o,2),l=a[0],d=a[1];return Object(u.useEffect)((function(){var t=null;return Promise.all([e.e(0),e.e(1)]).then(e.bind(null,36)).then((function(n){var e=n.default;t=e.auth().onAuthStateChanged((function(t){t?(r(t),d("loged")):(r(null),d("notloged"),s.a.disconnect())}))})),t}),[]),Object(u.useEffect)((function(){"loged"===l&&c&&(s.a.auth={user:c},s.a.connect())}),[c,l]),{loginState:l,user:c,signin:function(){Promise.all([e.e(0),e.e(1)]).then(e.bind(null,36)).then((function(t){var n=t.default,e=new n.auth.GoogleAuthProvider;n.auth().signInWithRedirect(e).then((function(){console.log("Login Success")})).catch((function(){console.log("Login Failed")}))}))},signout:function(){Promise.all([e.e(0),e.e(1)]).then(e.bind(null,36)).then((function(t){t.default.auth().signOut().then((function(){return r(null)}))}))}}}();return Object(l.jsx)(j.Provider,{value:c,children:n})}function b(){return Object(u.useContext)(j)}function f(t){var n=t.children,e=Object(r.a)(t,d),i=b();return Object(l.jsx)(a.b,Object(c.a)(Object(c.a)({},e),{},{render:function(t){var e=t.location;switch(i.loginState){case"listening":return Object(l.jsx)("p",{children:"Loading..."});case"loged":return n;case"notloged":return Object(l.jsx)(a.a,{to:{pathname:"/login",state:{from:e}}});default:return Object(l.jsx)("p",{children:"Error"})}}}))}},25:function(t,n,e){"use strict";var c=e(55),r=Object(c.io)("https://msg-chatapp.herokuapp.com/",{autoConnect:!1});r.on("connect_error",(function(){console.log("connect_error")})),n.a=r},35:function(t,n,e){"use strict";e.d(n,"a",(function(){return d})),e.d(n,"b",(function(){return j}));var c=e(53),r=e(15),i=e(16),u=e(0),o=e.n(u),a=e(12),s=e(1),l=o.a.createContext(),d=function(t){var n=t.children,e=h();return Object(s.jsx)(l.Provider,{value:e,children:n})},j=function(){return Object(u.useContext)(l)},h=function(){var t,n=Object(u.useState)([]),e=Object(i.a)(n,2),o=e[0],s=e[1],l=Object(a.c)();function d(t){return Object(c.a)(t).sort((function(t,n){return n.msg.timestamp-t.msg.timestamp}))}return Object(u.useEffect)((function(){if(l.user){var t,n=fetch("/api/pm-list/"+(null===(t=l.user)||void 0===t?void 0:t.uid)).then((function(t){return t.json()}));n.then((function(t){return s(d(t.users))})),n.catch((function(t){return console.log(t)}))}}),[l.user,null===(t=l.user)||void 0===t?void 0:t.uid]),{data:o,setContactList:s,updateContactLastMsg:function(t,n){var e=null===o||void 0===o?void 0:o.map((function(e){return e.uid===t?Object(r.a)(Object(r.a)({},e),{},{msg:n}):e}));s(d(e))}}}},96:function(t,n,e){},97:function(t,n,e){},98:function(t,n,e){"use strict";e.r(n);var c=e(0),r=e.n(c),i=e(54),u=e.n(i),o=e(21),a=e(2),s=e(12),l=e(35),d=e(1),j=r.a.lazy((function(){return e.e(6).then(e.bind(null,113))})),h=r.a.lazy((function(){return e.e(5).then(e.bind(null,112))})),b=r.a.lazy((function(){return e.e(7).then(e.bind(null,114))}));var f=function(){return Object(d.jsx)("div",{className:"app",children:Object(d.jsx)(s.b,{children:Object(d.jsxs)(o.a,{children:[Object(d.jsx)(a.b,{exact:!0,path:"/login",children:Object(d.jsx)(c.Suspense,{fallback:Object(d.jsx)("div",{children:"Loading..."}),children:Object(d.jsx)(b,{})})}),Object(d.jsx)(s.a,{exact:!0,path:"/",children:Object(d.jsx)(a.a,{to:"home"})}),Object(d.jsx)(s.a,{path:"/home",children:Object(d.jsx)(l.a,{children:Object(d.jsxs)(o.a,{children:[Object(d.jsx)(c.Suspense,{fallback:Object(d.jsx)("div",{children:"Loading..."}),children:Object(d.jsx)(j,{})}),Object(d.jsx)(a.d,{children:Object(d.jsx)(s.a,{exact:!0,path:"/home/t/:roomID",children:Object(d.jsx)(c.Suspense,{fallback:Object(d.jsx)("div",{children:"Loading..."}),children:Object(d.jsx)(h,{})})})})]})})})]})})})},O=function(t){t&&t instanceof Function&&e.e(8).then(e.bind(null,111)).then((function(n){var e=n.getCLS,c=n.getFID,r=n.getFCP,i=n.getLCP,u=n.getTTFB;e(t),c(t),r(t),i(t),u(t)}))};e(96),e(97);u.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(f,{})}),document.getElementById("root")),O()}},[[98,3,4]]]);