{"version":3,"sources":["assets/icon/search.svg","component/common/Avatar.jsx","component/common/Button.jsx","service/websocket.js","service/firebase.js","hook/use-auth.js","component/Sidebar/SidebarHeader.jsx","component/Sidebar/ChatboxCard.jsx","component/Sidebar/ChatboxList.jsx","component/Sidebar/Sidebar.jsx","component/Sidebar/index.js","component/Chatbox/ChatboxHeader.jsx","component/Chatbox/ChatboxMsgContainer/Msg.jsx","component/Chatbox/ChatboxMsgContainer/ChatboxMsgContainer.jsx","component/Chatbox/ChatboxMsgContainer/index.js","component/Chatbox/ChatboxMsgInput.jsx","component/Chatbox/Chatbox.jsx","component/Chatbox/index.js","component/Login/Login.jsx","component/Login/index.js","App.js","reportWebVitals.js","index.js"],"names":["AVATAR_SIZE_STYLES","small","width","height","medium","large","Avatar","imgSrc","size","className","style","padding","src","alt","Button","iconName","variant","type","color","rest","classArr","push","join","socket","io","autoConnect","on","console","log","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","authContext","React","createContext","ProvideAuth","children","auth","useState","user","setUser","loginState","setLoginState","useEffect","onAuthStateChanged","connect","signin","provider","GoogleAuthProvider","signInWithRedirect","then","catch","signout","signOut","useProvideAuth","Provider","value","useAuth","useContext","PrivateRoute","render","location","to","pathname","state","from","SearchInput","input","setInput","placeholder","onChange","e","target","SearchIcon","SidebarHeader","providerData","photoURL","onClick","ChatboxCard","props","username","lastMsg","display","fontWeight","ChatboxList","listData","map","userID","Sidebar","listUser","setListUser","users","uid","filter","off","ChatboxHeader","displayName","Msg","msgText","self","roomPhotoURL","msg","i","ChatboxMsgContainer","msgList","containerRef","useRef","current","scrollTop","scrollHeight","ref","classString","ChatboxMsgInput","roomID","pushNewMsg","setMsg","success","_doc","onSubmit","preventDefault","trim","payload","content","timestamp","Date","now","emit","Chatbox","roomInfo","setRoomInfo","useParams","setMsgList","useCallback","tmp","last","pop","newMsg","fetch","res","json","sorted","sort","a","b","group","groupMsgList","_msgList","Array","_msg","Login","useLocation","App","exact","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.dac74760.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/search.ffb58015.svg\";","import React from 'react';\n\nconst AVATAR_SIZE_STYLES = {\n  small: {\n    width: \"28px\",\n    height: \"28px\"\n  },\n  medium: {\n    width: \"40px\",\n    height: \"40px\"\n  },\n  large: {\n    width: \"60px\",\n    height: \"60px\"\n  }\n}\n\nconst Avatar = ({ imgSrc = \"https://i.pravatar.cc/300\", size = \"medium\" }) => {\n  const imgStyle = {\n    padding: \"1px\"\n  }\n\n  return (\n    <div className=\"avatar round\" style={AVATAR_SIZE_STYLES[size]}>\n      <img className=\"round\" style={imgStyle}\n        src={imgSrc}\n        alt=\"\"\n      />\n    </div>\n  );\n}\n\n\nexport default Avatar;\n","import React from 'react';\n\nconst Button = ({ iconName, variant, type, size, color, ...rest }) => {\n  let classArr = [\"btn\"];\n  if (variant === \"clear\") classArr.push(\"btn--nobg\");\n  if (size === \"large\") classArr.push(\"btn--large\")\n\n  return (\n    <button {...rest} type={type} className={classArr.join(\" \")}>\n      <span style={{ color: color }} className=\"material-icons-round\">\n        {iconName}\n      </span>\n    </button>\n  );\n}\n\nexport default Button;\n","import { io } from 'socket.io-client';\n\nconst URL = \"https://msg-chatapp.herokuapp.com/\";\nconst socket = io(URL, { autoConnect: false });\n\nsocket.on(\"connect_error\", () => {\n  console.log('connect_error')\n});\n\nexport default socket;","import firebase from \"firebase\";\nimport('firebase/auth');\n\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyBtLFctIyZhPquAqnrLP8DxOCJnDv16xvI\",\n  authDomain: \"chat-app-73a8d.firebaseapp.com\",\n  projectId: \"chat-app-73a8d\",\n  storageBucket: \"chat-app-73a8d.appspot.com\",\n  messagingSenderId: \"1026946776432\",\n  appId: \"1:1026946776432:web:0e06c59bd41ce6ea01e3b5\",\n  measurementId: \"G-QKZ0YM2KWT\"\n};\n\nfirebase.initializeApp(firebaseConfig);\n\nexport default firebase;\n","import React, { useState, useContext, useEffect } from 'react';\nimport {\n  Route,\n  Redirect\n} from 'react-router-dom';\n\nimport socket from '../service/websocket';\nimport firebase from '../service/firebase';\n\n\nconst authContext = React.createContext();\n\nexport function ProvideAuth({ children }) {\n  const auth = useProvideAuth();\n  return <authContext.Provider value={auth}>{children}</authContext.Provider>\n}\n\nexport function useAuth() {\n  return useContext(authContext);\n}\n\nfunction useProvideAuth() {\n  const [user, setUser] = useState(null);\n  const [loginState, setLoginState] = useState(\"listening\");\n\n  useEffect(() => {\n    const unsubcribe = firebase.auth().onAuthStateChanged((user) => {\n      if (user) {\n        setUser(user);\n        setLoginState(\"loged\");\n      } else {\n        setUser(null);\n        setLoginState(\"notloged\");\n      }\n    })\n\n    return unsubcribe;\n  }, [])\n\n  useEffect(() => {\n    if (loginState === \"loged\" && user) {\n      socket.auth = { user };\n      socket.connect();\n    }\n  }, [user, loginState]);\n\n  const signin = () => {\n    let provider = new firebase.auth.GoogleAuthProvider();\n    firebase.auth().signInWithRedirect(provider)\n      .then(() => {\n        console.log(\"Login Success\")\n      })\n      .catch(() => {\n        console.log(\"Login Failed\");\n      });\n  }\n\n  const signout = () => {\n    firebase.auth().signOut()\n      .then(() => setUser(null));\n  }\n\n  return {\n    loginState,\n    user,\n    signin,\n    signout\n  }\n}\n\nexport function PrivateRoute({ children, ...rest }) {\n  const auth = useAuth();\n  return (\n    <Route\n      {...rest}\n      render={({ location }) => {\n        switch (auth.loginState) {\n          case \"listening\":\n            return (<p>Loading...</p>);\n          case \"loged\":\n            return (children);\n          case \"notloged\":\n            return (\n              <Redirect to={{ pathname: \"/login\", state: { from: location } }} />\n            )\n          default:\n            return (<p>Error</p>);\n        }\n      }}\n    />\n  )\n}","import React, { useState } from 'react';\n\nimport SearchIcon from '../../assets/icon/search.svg';\nimport Avatar from '../common/Avatar';\nimport Button from '../common/Button';\n\nimport { useAuth } from '../../hook/use-auth';\n\nconst SidebarHeader = ({ providerData }) => {\n  const auth = useAuth();\n  const { photoURL } = providerData || {};\n\n  return (\n    <header className=\"sidebar-header\">\n      <div className=\"sidebar-top\">\n        <div className=\"sidebar-top-left\">\n          <Avatar imgSrc={photoURL} />\n          <span>Chats</span>\n        </div>\n\n        <div className=\"sidebar-top-right\">\n          <Button iconName=\"more_horiz\" />\n          <Button iconName=\"add\" />\n          <Button iconName=\"logout\" onClick={auth.signout} />\n        </div>\n      </div>\n\n      <div className=\"sidebar-bottom\">\n        <SearchInput />\n      </div>\n    </header>\n  );\n}\n\nfunction SearchInput() {\n  const [input, setInput] = useState('')\n\n  return (\n    <>\n      <input\n        type=\"text\"\n        placeholder=\"Search messenger\"\n        value={input}\n        onChange={(e) => setInput(e.target.value)}\n      />\n      {!input && <img src={SearchIcon} alt=\"\" />}\n    </>\n  )\n}\n\n\nexport default SidebarHeader;\n","import {\n  Link\n} from 'react-router-dom';\n\nimport Avatar from '../common/Avatar';\n\nconst ChatboxCard = (props) => {\n  const {\n    username = \"Thanh Nhut\",\n    photoURL,\n    lastMsg = \"Lorem ipsum dolor,adfadf asdfasfafasfsafasfasdfs Tui laf\",\n    to\n  } = props;\n\n  return (\n    <Link to={to} className=\"chatbox-card\">\n      <Avatar imgSrc={photoURL} size=\"large\" />\n      <div className=\"chatbox-card__info\">\n        <span style={{ display: \"block\", fontWeight: \"600\" }}>{username}</span>\n        <span>{lastMsg}</span>\n      </div>\n    </Link>\n  );\n}\n\nexport default ChatboxCard;\n","import ChatboxCard from './ChatboxCard';\n\nconst ChatboxList = ({ listData }) => {\n  return (\n    <div className=\"chatbox-list\">\n      {listData?.map(({ userID, ...rest }) =>\n        <ChatboxCard\n          key={userID}\n          {...rest}\n          to={\"/home/t/\" + userID}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default ChatboxList;\n","import { useState, useEffect } from 'react';\n\nimport SidebarHeader from './SidebarHeader';\nimport ChatboxList from './ChatboxList';\n\nimport socket from '../../service/websocket';\nimport { useAuth } from '../../hook/use-auth';\n\nimport('./sidebar.css')\n\nconst Sidebar = () => {\n  const [listUser, setListUser] = useState([]);\n  const auth = useAuth();\n\n  useEffect(() => {\n    if (auth.loginState === \"loged\") {\n      socket.on(\"users\", users => {\n        console.log(users);\n        console.log(auth.user?.uid)\n        users = users.filter((user) => user?.userID !== auth.user?.uid);\n        setListUser(users);\n      });\n    }\n\n    return () => {\n      socket.off(\"users\");\n    };\n  }, [auth.loginState, auth.user?.uid]);\n\n  return (\n    <div className=\"sidebar\">\n      <SidebarHeader providerData={auth.user?.providerData[0]} />\n      <ChatboxList listData={listUser} />\n    </div>\n  );\n}\n\nexport default Sidebar;\n","import Sidebar from './Sidebar';\n\nexport default Sidebar;","import React from 'react';\n\nimport Avatar from '../common/Avatar';\nimport Button from '../common/Button';\n\nconst ChatboxHeader = ({ photoURL, displayName }) => {\n  return (\n    <div className=\"chatbox__header\">\n      <div className=\"left\">\n        <Avatar imgSrc={photoURL} size=\"medium\" />\n        <div className=\"chatbox-info\">\n          <p className=\"chatbox-info__name\">{displayName}</p>\n          <p className=\"chatbox-info__status\">{\"Active now\"}</p>\n        </div>\n      </div>\n      <div className=\"right\">\n        <Button variant=\"clear\" iconName=\"phone_in_talk\" color=\"var(--pink300)\" />\n        <Button variant=\"clear\" iconName=\"video_call\" color=\"var(--pink300)\" />\n        <Button variant=\"clear\" iconName=\"more_horiz\" color=\"var(--pink300)\" />\n      </div>\n    </div>\n  );\n}\n\nexport default ChatboxHeader;\n","import React from 'react';\n\nimport Avatar from '../../common/Avatar';\n\nconst Msg = ({ msgText, className, self, roomPhotoURL }) => {\n  // msgText = msgText ? msgText : [\"Alaba trapasdasdfasfasdfasdfasdfasdfasdfDFSADFASDFASDFSDFSDFSDFDSFSDFSDFSDFSDFSDFSDFSDFSDFSDFSDFSFSDFSDAFSDFASDFASDFASDFASDFASDFSADFASDFASDFASDFASDFASDFASDFASDFASDFASDF\", \"lorem\", \"ahaha\", \"hehe\"]\n\n  return (\n    <div className={className}>\n      {!self && <Avatar size=\"small\" imgSrc={roomPhotoURL} />}\n      <div className=\"msg-list\">\n        {msgText && msgText.map((msg, i) => <p key={i}>{msg}</p>)}\n      </div>\n    </div>\n  );\n}\n\nexport default Msg;\n","import { useRef, useEffect } from 'react';\n\nimport Msg from './Msg';\nimport('./style.css')\n\nconst ChatboxMsgContainer = ({ msgList, uid, roomPhotoURL }) => {\n  const containerRef = useRef(null);\n\n  useEffect(() => {\n    containerRef.current.scrollTop = containerRef.current.scrollHeight;\n  }, [msgList])\n\n  return (\n    <div ref={containerRef} className=\"chatbox-msg-container\">\n      {\n        msgList?.map((msg, i) => {\n          let classString = msg?.from === uid ? \"msg msg--mine\" : \"msg\";\n          let self = msg?.from === uid;\n          return <Msg roomPhotoURL={roomPhotoURL} self={self} key={i} msgText={msg?.msg} className={classString} />\n        })\n      }\n    </div>\n  );\n}\n\nexport default ChatboxMsgContainer;\n","import ChatboxMsgContainer from './ChatboxMsgContainer';\n\nexport default ChatboxMsgContainer;","import { useState, useEffect } from 'react';\n\nimport socket from '../../service/websocket';\n\n\nimport Button from '../common/Button';\n\nconst ChatboxMsgInput = ({ roomID, uid, pushNewMsg }) => {\n  const [msg, setMsg] = useState(\"\");\n\n  useEffect(() => {\n    socket.on(\"msg:create\", ({ success, _doc }) => {\n      if (success) {\n        pushNewMsg(_doc);\n      }\n    })\n\n    return () => {\n      socket.off(\"msg:create\")\n    }\n  }, [pushNewMsg])\n\n  const sendMsg = (e) => {\n    e.preventDefault();\n    if (msg.trim()) {\n      const payload = {\n        from: uid,\n        to: roomID,\n        content: msg,\n        timestamp: Date.now()\n      }\n      socket.emit(\"msg:create\", payload);\n    }\n    setMsg(\"\");\n  }\n\n  return (\n    <div className=\"chatbox-msg-input\">\n      <form onSubmit={sendMsg}>\n        <input\n          type=\"text\"\n          placeholder=\"Aa\"\n          value={msg}\n          onChange={(e) => setMsg(e.target.value)}\n        />\n        <Button\n          variant=\"clear\"\n          size=\"large\"\n          iconName=\"send\"\n          color=\"var(--pink300)\"\n        />\n      </form>\n    </div>\n  );\n}\n\nexport default ChatboxMsgInput;\n","import { useEffect, useState, useCallback } from 'react';\nimport { useParams } from 'react-router-dom';\n\nimport { useAuth } from '../../hook/use-auth';\nimport socket from '../../service/websocket';\n\nimport ChatboxHeader from './ChatboxHeader';\nimport ChatboxMsgContainer from './ChatboxMsgContainer';\nimport ChatboxMsgInput from './ChatboxMsgInput';\n\nimport('./chatbox.css');\n\nconst Chatbox = () => {\n  const [roomInfo, setRoomInfo] = useState(null);\n  const { roomID } = useParams();\n  const [msgList, setMsgList] = useState([]);\n\n  const auth = useAuth();\n  const uid = auth.user?.uid;\n\n  const pushNewMsg = useCallback((msg) => {\n    let tmp = [...msgList];\n    let last = tmp.pop();\n    if (!last) {\n      setMsgList([{ from: msg.from, msg: [msg.content] }]);\n      return;\n    }\n\n    if (last?.from === msg?.from) {\n      last.msg.push(msg.content)\n      tmp.push(last);\n    } else {\n      let newMsg = { from: msg.from, msg: [msg.content] }\n      tmp.push(last);\n      tmp.push(newMsg)\n    }\n\n    setMsgList(tmp);\n  }, [msgList])\n\n  useEffect(() => {\n    const res = fetch(\"/api/user/\" + roomID);\n    const json = res.then(res => res.json());\n    json.then(json => {\n      setRoomInfo(json);\n      console.log(json)\n    }).catch(e => {\n      console.log(e)\n    })\n  }, [roomID]);\n\n  useEffect(() => {\n    const res = fetch(`/api/message?from=${uid}&to=${roomID}`);\n    const json = res.then(res => res.json());\n    json.then(json => {\n      const sorted = [...json].sort((a, b) => a.timestamp - b.timestamp);\n      const group = groupMsgList(sorted);\n      setMsgList(group)\n    })\n\n  }, [roomID, uid])\n\n  useEffect(() => {\n    socket.on(\"private msg\", msg => {\n      if (msg.from === roomID) {\n        pushNewMsg(msg);\n      }\n    })\n\n    return () => {\n      socket.off('private msg');\n    }\n\n  }, [pushNewMsg, roomID]);\n\n  // eslint-disable-next-line no-unused-vars\n  const groupMsgList = (_msgList) => {\n    console.log({ _msgList })\n    _msgList = Array.from(_msgList);\n    let res = []\n    let tmp = { from: \"\", msg: [] }\n    for (var _msg of _msgList) {\n\n      if (tmp.from) {\n        if (_msg.from !== tmp.from) {\n          res.push(tmp);\n          tmp = { from: _msg.from, msg: [_msg.content] }\n        } else {\n\n          tmp.msg.push(_msg.content)\n        }\n      } else {\n        tmp.from = _msg.from;\n        tmp.msg = [_msg.content];\n      }\n      // console.log({ tmp })\n\n    }\n    res.push(tmp);\n    return res;\n  }\n\n  if (roomInfo) {\n    return (\n      <div className=\"chatbox\">\n        <ChatboxHeader {...roomInfo} />\n        <ChatboxMsgContainer roomPhotoURL={roomInfo?.photoURL} uid={uid} msgList={msgList} />\n        <ChatboxMsgInput pushNewMsg={pushNewMsg} roomID={roomID} uid={uid} />\n      </div>\n    );\n  } else {\n    return <p>Loading...</p>\n  }\n\n\n}\n\nexport default Chatbox;\n","import Chatbox from './Chatbox';\n\nexport default Chatbox;","import { useLocation, Redirect } from 'react-router-dom';\n\nimport {\n  useAuth\n} from '../../hook/use-auth';\nimport('./login.css')\n\nconst Login = () => {\n  let location = useLocation();\n  const auth = useAuth();\n\n  switch (auth.loginState) {\n    case \"listening\":\n      return (<p>Loading...</p>);\n    case \"loged\":\n      return (<Redirect to={{ pathname: \"/\", state: { from: location } }} />);\n    case \"notloged\":\n      return (\n        <div className=\"login\">\n          <button onClick={auth.signin}>Sign in with Google</button>\n        </div>\n      );\n    default:\n      return (<p>Error</p>);\n  }\n}\n\nexport default Login;\n","import Login from './Login';\n\nexport default Login;","import {\n  BrowserRouter as Router,\n  Route,\n  Switch,\n  Redirect\n} from 'react-router-dom';\n\nimport Sidebar from './component/Sidebar';\nimport Chatbox from './component/Chatbox';\nimport Login from './component/Login';\n\nimport {\n  ProvideAuth,\n  PrivateRoute,\n} from './hook/use-auth';\n\n// import socket from './socket/socket';\n\nfunction App() {\n\n  return (\n    <div className=\"app\">\n      <ProvideAuth>\n        <Router>\n          <Route exact path=\"/login\">\n            <Login />\n          </Route>\n\n          <PrivateRoute exact path=\"/\">\n            <Redirect to=\"home\" />\n          </PrivateRoute>\n\n          <PrivateRoute path=\"/home\">\n            <Router>\n              <Sidebar />\n              <Switch>\n                <PrivateRoute exact path=\"/home/t/:roomID\">\n                  <Chatbox />\n                </PrivateRoute>\n              </Switch>\n            </Router>\n          </PrivateRoute>\n\n\n\n        </Router>\n      </ProvideAuth>\n\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nimport('./style/main.css');\nimport('./style/common.css');\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}